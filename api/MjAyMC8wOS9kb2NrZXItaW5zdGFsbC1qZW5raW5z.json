{"title":"Docker安装Jenkins","date":"2020-09-28T16:10:00.000Z","date_formatted":{"ll":"2020年9月28日","L":"2020/09/28","MM-DD":"09-28"},"link":"2020/09/docker-install-jenkins","tags":["Jenkins"],"categories":["CI/CD"],"updated":"2020-09-28T08:33:29.821Z","content":"<p>建议使用的Docker映像是<a href=\"https://hub.docker.com/r/jenkinsci/blueocean/\" target=\"_blank\"><code>jenkinsci/blueocean</code> image</a>(来自 the <a href=\"https://hub.docker.com/\" target=\"_blank\">Docker Hub repository</a>)。 该镜像包含当前的<a href=\"https://www.jenkins.io/download\" target=\"_blank\">长期支持 (LTS) 的Jenkins版本</a> （可以投入使用） ，捆绑了所有Blue Ocean插件和功能。这意味着你不需要单独安装Blue Ocean插件。</p>\n<h3 id=\"在macos和linux上\">在macOS和Linux上<a title=\"#在macos和linux上\" href=\"#在macos和linux上\"></a></h3>\n<ol>\n<li>打开一个终端窗口。</li>\n<li>下载 <code>jenkinsci/blueocean</code> 镜像并使用以下docker run 命令将其作为Docker中的容器运行 ：</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker run \\</span><br><span class=\"line\">  -u root \\</span><br><span class=\"line\">  -d \\</span><br><span class=\"line\">  -p 7999:8080 \\</span><br><span class=\"line\">  -v jenkins-data:&#x2F;var&#x2F;jenkins_home \\</span><br><span class=\"line\">  -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock \\</span><br><span class=\"line\">  jenkinsci&#x2F;blueocean</span><br></pre></td></tr></table></figure>\n<p>直接docker run，第一次会自动拉取远程仓库中最新的镜像</p>\n<p>通过7999端口访问主机上的Jenkins</p>\n<h3 id=\"安装后设置向导\">安装后设置向导<a title=\"#安装后设置向导\" href=\"#安装后设置向导\"></a></h3>\n<p>Jenkins容器运行起来后，访问<code>http://localhost:7999/</code>会进入安装向导。</p>\n<p>此安装向导会引导您完成几个快速“一次性”步骤来解锁Jenkins， 使用插件对其进行自定义，并创建第一个可以继续访问Jenkins的管理员用户。</p>\n<h5 id=\"解锁-jenkins\">解锁 Jenkins<a title=\"#解锁-jenkins\" href=\"#解锁-jenkins\"></a></h5>\n<p>当您第一次访问新的Jenkins实例时，系统会要求您使用自动生成的密码对其进行解锁。</p>\n<p>浏览到 <code>http://localhost:7999</code>（或安装时为Jenkins配置的任何端口），并等待 <strong>解锁 Jenkins</strong> 页面出现。</p>\n<img src=\"https://images.shiguangping.com/imgs/20200928162439.jpg\" alt=\"Unlock Jenkins page\"  />\n<p>从Jenkins控制台日志输出中，复制自动生成的字母数字密码（在两组星号之间）。</p>\n<p>使用Docker可视化工具，容器跑起来之后，控制台会打印日志消息：</p>\n<img src=\"https://images.shiguangping.com/imgs/20200928161859.png\" alt=\"image-20200928161859517\"  />\n<p>在 <strong>解锁Jenkins</strong> 页面上，将此 <strong>密码</strong> 粘贴到管理员密码字段中，然后单击 <strong>继续</strong> 。</p>\n<p>如果没有使用可视化工具，则可以从Docker日志（<a href=\"https://www.jenkins.io/zh/doc/book/installing/#accessing-the-jenkins-console-log-through-docker-logs\" target=\"_blank\">above</a>） 访问Jenkins控制台日志。</p>\n<p>或者在<code>/var/jenkins_home/secrets/initialAdminPassword</code>找到密码。</p>\n<h5 id=\"自定义jenkins插件\">自定义jenkins插件<a title=\"#自定义jenkins插件\" href=\"#自定义jenkins插件\"></a></h5>\n<p>解锁 Jenkins之后，在 <strong>Customize Jenkins</strong> 页面内， 可以安装任何数量的有用插件作为初始步骤的一部分。</p>\n<p>两个选项可以设置:</p>\n<ul>\n<li><strong>安装建议的插件</strong> - 安装推荐的一组插件，这些插件基于最常见的用例.</li>\n<li><strong>选择要安装的插件</strong> - 选择安装的插件集。当你第一次访问插件选择页面时，默认选择建议的插件。</li>\n</ul>\n<blockquote>\n<p>如果不确定需要哪些插件，请选择 <strong>安装建议的插件</strong> 。 之后可以通过Jenkins中的<a href=\"https://www.jenkins.io/zh/doc/book/managing\" target=\"_blank\"><strong>Manage Jenkins</strong></a> &gt; <a href=\"https://www.jenkins.io/zh/doc/book/managing/plugins/\" target=\"_blank\"><strong>Manage Plugins</strong></a> 页面在稍后的时间点安装（或删除）其他Jenkins插件 。</p>\n</blockquote>\n<h5 id=\"创建第一个管理员用户\">创建第一个管理员用户<a title=\"#创建第一个管理员用户\" href=\"#创建第一个管理员用户\"></a></h5>\n<p>最后，在<code>customizing Jenkins with plugins</code>之后，Jenkins要求创建第一个管理员用户。 . 出现“ <strong>创建第一个管理员用户</strong> ”页面时， 请在各个字段中指定管理员用户的详细信息，然后单击 <strong>保存完成</strong> 。 . 当 <strong>Jenkins准备好了</strong> 出现时，单击<em>开始使用 Jenkins</em>。</p>\n<p><strong>Notes:</strong> * 这个页面可能显示 <strong>Jenkins几乎准备好了!</strong> 相反，如果是这样，请单击 <strong>重启</strong> 。 * 如果该页面在一分钟后不会自动刷新，请使用Web浏览器手动刷新页面。如果需要，请使用您刚刚创建的用户的凭据登录到Jenkins，并准备好开始使用Jenkins！</p>\n<blockquote>\n<p>从这时起，Jenkins用户界面只能通过提供有效的用户名和密码凭证来访问。</p>\n</blockquote>\n","next":{"title":"比特宇宙－TCP/IP的诞生","link":"2020/09/tcpip-birth-talk-talk"},"plink":"https://www.shiguangping.com/2020/09/docker-install-jenkins/","toc":[{"id":"在macos和linux上","title":"在macOS和Linux上","index":"1"},{"id":"安装后设置向导","title":"安装后设置向导","index":"2"}]}