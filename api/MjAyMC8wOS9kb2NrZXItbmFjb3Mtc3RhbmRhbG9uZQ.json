{"title":"Docker部署nacos单机版","date":"2020-09-20T00:05:00.000Z","date_formatted":{"ll":"2020年9月20日","L":"2020/09/20","MM-DD":"09-20"},"link":"2020/09/docker-nacos-standalone","tags":["Spring-Cloud","Spring-Cloud-Alibaba","服务注册与发现","配置中心"],"categories":["Java"],"updated":"2020-09-19T16:07:41.953Z","content":"<h2 id=\"创建nacos容器\">创建nacos容器<a title=\"#创建nacos容器\" href=\"#创建nacos容器\"></a></h2>\n<ul>\n<li>\n<p>搜索镜像</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search nacos</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>拉取镜像到本地（未指定版本默认拉取远程仓库中的最新版）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nacos/nacos-server</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>新建nacos容器</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server</span><br></pre></td></tr></table></figure>\n<p><code>env</code>参数是指容器所处的环境，这里是指建立单机版的nacos</p>\n</li>\n</ul>\n<h2 id=\"配置数据库\">配置数据库<a title=\"#配置数据库\" href=\"#配置数据库\"></a></h2>\n<ul>\n<li>\n<p>创建数据库（默认使用mysql数据库）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create database nacos_config;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>导入sql脚本，<a href=\"https://github.com/alibaba/nacos/blob/master/config/src/main/resources/META-INF/nacos-db.sql\" target=\"_blank\">到官网复制</a></p>\n</li>\n<li>\n<p>修改nacos配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it nacos /bin/sh; <span class=\"built_in\">exit</span></span><br></pre></td></tr></table></figure>\n<p><code>nacos</code>为容器名称，进入交互模式，进入conf目录，可以使用vim编辑nacos配置文件<code>application.properties</code>。</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改端口号（默认是8848）</span></span><br><span class=\"line\"><span class=\"meta\">server.port</span>=<span class=\"string\">8001</span></span><br><span class=\"line\"><span class=\"comment\"># 数据库的url/user/pass</span></span><br><span class=\"line\"><span class=\"meta\">db.url.0</span>=<span class=\"string\">jdbc:mysql://localhost:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span></span><br><span class=\"line\"><span class=\"meta\">db.user</span>=<span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"meta\">db.password</span>=<span class=\"string\">123456</span></span><br></pre></td></tr></table></figure>\n<p><code>db.url.1</code>用于配置从数据库，不需要先注释掉</p>\n</li>\n</ul>\n<p>以上都配置完之后重启容器，访问<a href=\"http://localhost:8001/nacos\" target=\"_blank\">http://localhost:8001/nacos</a>，显示登陆页面，用户名和密码默认都是<code>nacos</code>。</p>\n","next":{"title":"Vue组件间通信","link":"2020/09/vue-components-communication"},"plink":"https://www.shiguangping.com/2020/09/docker-nacos-standalone/","toc":[{"id":"创建nacos容器","title":"创建nacos容器","index":"1"},{"id":"配置数据库","title":"配置数据库","index":"2"}]}